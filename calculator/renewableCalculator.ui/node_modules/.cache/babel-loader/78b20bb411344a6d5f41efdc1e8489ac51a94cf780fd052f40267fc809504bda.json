{"ast":null,"code":"// 电费服务 - 根据地区提供电费数据\nexport const tariffService = {\n  // 英国各地区电费数据 (2024年平均数据，单位：便士/kWh)\n  regionTariffs: {\n    // 英格兰地区\n    'England': {\n      standardRate: 24.5,\n      standingCharge: 60.1,\n      peakRate: 28.3,\n      offPeakRate: 20.2,\n      nightRate: 15.8,\n      economy7NightRate: 13.5,\n      economy10NightRate: 12.8\n    },\n    // 苏格兰地区 - 通常稍低\n    'Scotland': {\n      standardRate: 23.8,\n      standingCharge: 58.5,\n      peakRate: 27.5,\n      offPeakRate: 19.8,\n      nightRate: 15.2,\n      economy7NightRate: 13.0,\n      economy10NightRate: 12.3\n    },\n    // 威尔士地区\n    'Wales': {\n      standardRate: 24.2,\n      standingCharge: 59.3,\n      peakRate: 28.0,\n      offPeakRate: 20.0,\n      nightRate: 15.5,\n      economy7NightRate: 13.2,\n      economy10NightRate: 12.5\n    },\n    // 北爱尔兰地区 - 通常较高\n    'Northern Ireland': {\n      standardRate: 26.1,\n      standingCharge: 62.8,\n      peakRate: 30.2,\n      offPeakRate: 21.5,\n      nightRate: 16.8,\n      economy7NightRate: 14.2,\n      economy10NightRate: 13.5\n    },\n    // 伦敦地区 - 通常稍高\n    'London': {\n      standardRate: 25.3,\n      standingCharge: 61.5,\n      peakRate: 29.1,\n      offPeakRate: 20.8,\n      nightRate: 16.2,\n      economy7NightRate: 13.8,\n      economy10NightRate: 13.1\n    }\n  },\n  // 根据邮编前缀匹配地区\n  postcodeToRegion: {\n    // 伦敦邮编\n    'E': 'London',\n    'EC': 'London',\n    'N': 'London',\n    'NW': 'London',\n    'SE': 'London',\n    'SW': 'London',\n    'W': 'London',\n    'WC': 'London',\n    // 苏格兰邮编\n    'AB': 'Scotland',\n    'DD': 'Scotland',\n    'DG': 'Scotland',\n    'EH': 'Scotland',\n    'FK': 'Scotland',\n    'G': 'Scotland',\n    'HS': 'Scotland',\n    'IV': 'Scotland',\n    'KA': 'Scotland',\n    'KW': 'Scotland',\n    'KY': 'Scotland',\n    'ML': 'Scotland',\n    'PA': 'Scotland',\n    'PH': 'Scotland',\n    'TD': 'Scotland',\n    'ZE': 'Scotland',\n    // 威尔士邮编\n    'CF': 'Wales',\n    'LD': 'Wales',\n    'LL': 'Wales',\n    'NP': 'Wales',\n    'SA': 'Wales',\n    'SY': 'Wales',\n    // 北爱尔兰邮编\n    'BT': 'Northern Ireland'\n  },\n  // 获取默认电费（全英国平均）\n  getDefaultTariffs() {\n    return {\n      standardRate: 24.5,\n      standingCharge: 60.1,\n      peakRate: 28.3,\n      offPeakRate: 20.2,\n      nightRate: 15.8,\n      economy7NightRate: 13.5,\n      economy10NightRate: 12.8,\n      gasRate: 7.5,\n      gasStandingCharge: 31.4,\n      feedInTariffRate: 4.1,\n      smartExportGuarantee: 4.1\n    };\n  },\n  // 根据邮编获取地区\n  getRegionFromPostcode(postcode) {\n    var _cleanPostcode$match;\n    if (!postcode) return 'England'; // 默认值\n\n    const cleanPostcode = postcode.replace(/\\s+/g, '').toUpperCase();\n\n    // 提取邮编前缀\n    const prefix = (_cleanPostcode$match = cleanPostcode.match(/^[A-Z]+/)) === null || _cleanPostcode$match === void 0 ? void 0 : _cleanPostcode$match[0];\n    if (!prefix) return 'England';\n\n    // 首先检查完整前缀\n    if (this.postcodeToRegion[prefix]) {\n      return this.postcodeToRegion[prefix];\n    }\n\n    // 然后检查单字母前缀\n    const singleLetter = prefix.charAt(0);\n    if (this.postcodeToRegion[singleLetter]) {\n      return this.postcodeToRegion[singleLetter];\n    }\n    return 'England'; // 默认为英格兰\n  },\n  // 根据位置数据获取地区电费\n  getTariffsForLocation(locationData) {\n    let region = 'England'; // 默认地区\n\n    // 优先使用country字段\n    if (locationData.country) {\n      if (locationData.country.includes('Scotland')) {\n        region = 'Scotland';\n      } else if (locationData.country.includes('Wales')) {\n        region = 'Wales';\n      } else if (locationData.country.includes('Northern Ireland')) {\n        region = 'Northern Ireland';\n      }\n    }\n\n    // 如果country字段不明确，使用邮编判断\n    if (region === 'England' && locationData.postcode) {\n      region = this.getRegionFromPostcode(locationData.postcode);\n    }\n\n    // 特殊处理伦敦地区\n    if (region === 'England' && locationData.region) {\n      if (locationData.region.includes('London') || locationData.region.includes('Greater London')) {\n        region = 'London';\n      }\n    }\n\n    // 获取该地区的电费数据\n    const regionTariffs = this.regionTariffs[region] || this.regionTariffs['England'];\n    return {\n      ...this.getDefaultTariffs(),\n      ...regionTariffs,\n      detectedRegion: region,\n      source: 'regional_average'\n    };\n  },\n  // 获取地区信息说明\n  getRegionInfo(region) {\n    const info = {\n      'England': {\n        name: '英格兰',\n        description: '英格兰地区平均电费'\n      },\n      'Scotland': {\n        name: '苏格兰',\n        description: '苏格兰地区平均电费（通常略低于英格兰）'\n      },\n      'Wales': {\n        name: '威尔士',\n        description: '威尔士地区平均电费'\n      },\n      'Northern Ireland': {\n        name: '北爱尔兰',\n        description: '北爱尔兰地区平均电费（通常较高）'\n      },\n      'London': {\n        name: '伦敦',\n        description: '伦敦地区平均电费（通常略高于英格兰平均值）'\n      }\n    };\n    return info[region] || info['England'];\n  }\n};","map":{"version":3,"names":["tariffService","regionTariffs","standardRate","standingCharge","peakRate","offPeakRate","nightRate","economy7NightRate","economy10NightRate","postcodeToRegion","getDefaultTariffs","gasRate","gasStandingCharge","feedInTariffRate","smartExportGuarantee","getRegionFromPostcode","postcode","_cleanPostcode$match","cleanPostcode","replace","toUpperCase","prefix","match","singleLetter","charAt","getTariffsForLocation","locationData","region","country","includes","detectedRegion","source","getRegionInfo","info","name","description"],"sources":["/Users/xuefei/Desktop/calculator00/calculator/renewableCalculator.ui/src/services/tariffService.js"],"sourcesContent":["// 电费服务 - 根据地区提供电费数据\nexport const tariffService = {\n  // 英国各地区电费数据 (2024年平均数据，单位：便士/kWh)\n  regionTariffs: {\n    // 英格兰地区\n    'England': {\n      standardRate: 24.5,\n      standingCharge: 60.1,\n      peakRate: 28.3,\n      offPeakRate: 20.2,\n      nightRate: 15.8,\n      economy7NightRate: 13.5,\n      economy10NightRate: 12.8\n    },\n    \n    // 苏格兰地区 - 通常稍低\n    'Scotland': {\n      standardRate: 23.8,\n      standingCharge: 58.5,\n      peakRate: 27.5,\n      offPeakRate: 19.8,\n      nightRate: 15.2,\n      economy7NightRate: 13.0,\n      economy10NightRate: 12.3\n    },\n    \n    // 威尔士地区\n    'Wales': {\n      standardRate: 24.2,\n      standingCharge: 59.3,\n      peakRate: 28.0,\n      offPeakRate: 20.0,\n      nightRate: 15.5,\n      economy7NightRate: 13.2,\n      economy10NightRate: 12.5\n    },\n    \n    // 北爱尔兰地区 - 通常较高\n    'Northern Ireland': {\n      standardRate: 26.1,\n      standingCharge: 62.8,\n      peakRate: 30.2,\n      offPeakRate: 21.5,\n      nightRate: 16.8,\n      economy7NightRate: 14.2,\n      economy10NightRate: 13.5\n    },\n    \n    // 伦敦地区 - 通常稍高\n    'London': {\n      standardRate: 25.3,\n      standingCharge: 61.5,\n      peakRate: 29.1,\n      offPeakRate: 20.8,\n      nightRate: 16.2,\n      economy7NightRate: 13.8,\n      economy10NightRate: 13.1\n    }\n  },\n\n  // 根据邮编前缀匹配地区\n  postcodeToRegion: {\n    // 伦敦邮编\n    'E': 'London', 'EC': 'London', 'N': 'London', 'NW': 'London',\n    'SE': 'London', 'SW': 'London', 'W': 'London', 'WC': 'London',\n    \n    // 苏格兰邮编\n    'AB': 'Scotland', 'DD': 'Scotland', 'DG': 'Scotland', 'EH': 'Scotland',\n    'FK': 'Scotland', 'G': 'Scotland', 'HS': 'Scotland', 'IV': 'Scotland',\n    'KA': 'Scotland', 'KW': 'Scotland', 'KY': 'Scotland', 'ML': 'Scotland',\n    'PA': 'Scotland', 'PH': 'Scotland', 'TD': 'Scotland', 'ZE': 'Scotland',\n    \n    // 威尔士邮编\n    'CF': 'Wales', 'LD': 'Wales', 'LL': 'Wales', 'NP': 'Wales',\n    'SA': 'Wales', 'SY': 'Wales',\n    \n    // 北爱尔兰邮编\n    'BT': 'Northern Ireland'\n  },\n\n  // 获取默认电费（全英国平均）\n  getDefaultTariffs() {\n    return {\n      standardRate: 24.5,\n      standingCharge: 60.1,\n      peakRate: 28.3,\n      offPeakRate: 20.2,\n      nightRate: 15.8,\n      economy7NightRate: 13.5,\n      economy10NightRate: 12.8,\n      gasRate: 7.5,\n      gasStandingCharge: 31.4,\n      feedInTariffRate: 4.1,\n      smartExportGuarantee: 4.1\n    };\n  },\n\n  // 根据邮编获取地区\n  getRegionFromPostcode(postcode) {\n    if (!postcode) return 'England'; // 默认值\n    \n    const cleanPostcode = postcode.replace(/\\s+/g, '').toUpperCase();\n    \n    // 提取邮编前缀\n    const prefix = cleanPostcode.match(/^[A-Z]+/)?.[0];\n    if (!prefix) return 'England';\n    \n    // 首先检查完整前缀\n    if (this.postcodeToRegion[prefix]) {\n      return this.postcodeToRegion[prefix];\n    }\n    \n    // 然后检查单字母前缀\n    const singleLetter = prefix.charAt(0);\n    if (this.postcodeToRegion[singleLetter]) {\n      return this.postcodeToRegion[singleLetter];\n    }\n    \n    return 'England'; // 默认为英格兰\n  },\n\n  // 根据位置数据获取地区电费\n  getTariffsForLocation(locationData) {\n    let region = 'England'; // 默认地区\n    \n    // 优先使用country字段\n    if (locationData.country) {\n      if (locationData.country.includes('Scotland')) {\n        region = 'Scotland';\n      } else if (locationData.country.includes('Wales')) {\n        region = 'Wales';\n      } else if (locationData.country.includes('Northern Ireland')) {\n        region = 'Northern Ireland';\n      }\n    }\n    \n    // 如果country字段不明确，使用邮编判断\n    if (region === 'England' && locationData.postcode) {\n      region = this.getRegionFromPostcode(locationData.postcode);\n    }\n    \n    // 特殊处理伦敦地区\n    if (region === 'England' && locationData.region) {\n      if (locationData.region.includes('London') || \n          locationData.region.includes('Greater London')) {\n        region = 'London';\n      }\n    }\n    \n    // 获取该地区的电费数据\n    const regionTariffs = this.regionTariffs[region] || this.regionTariffs['England'];\n    \n    return {\n      ...this.getDefaultTariffs(),\n      ...regionTariffs,\n      detectedRegion: region,\n      source: 'regional_average'\n    };\n  },\n\n  // 获取地区信息说明\n  getRegionInfo(region) {\n    const info = {\n      'England': {\n        name: '英格兰',\n        description: '英格兰地区平均电费'\n      },\n      'Scotland': {\n        name: '苏格兰',\n        description: '苏格兰地区平均电费（通常略低于英格兰）'\n      },\n      'Wales': {\n        name: '威尔士',\n        description: '威尔士地区平均电费'\n      },\n      'Northern Ireland': {\n        name: '北爱尔兰',\n        description: '北爱尔兰地区平均电费（通常较高）'\n      },\n      'London': {\n        name: '伦敦',\n        description: '伦敦地区平均电费（通常略高于英格兰平均值）'\n      }\n    };\n    \n    return info[region] || info['England'];\n  }\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}