{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PostcodeLocationInput=_ref=>{let{onLocationChange}=_ref;const[postcode,setPostcode]=useState('');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const handleSubmit=async e=>{e.preventDefault();if(!postcode.trim())return;setIsLoading(true);setError('');try{// Use the same postcode service as in BasicInformation\nconst response=await fetch(\"https://api.postcodes.io/postcodes/\".concat(postcode.trim()));const data=await response.json();if(data.status===200){const location={lat:data.result.latitude,lng:data.result.longitude,postcode:data.result.postcode,location:\"\".concat(data.result.admin_ward,\", \").concat(data.result.admin_district),country:data.result.country};onLocationChange(location);}else{setError('Invalid postcode. Please check and try again.');}}catch(err){setError('Unable to find location. Please check your postcode.');}finally{setIsLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"postcode-location-input\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"postcode-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:postcode,onChange:e=>setPostcode(e.target.value.toUpperCase()),placeholder:\"Enter postcode (e.g. SW1A 1AA)\",className:\"postcode-input\",disabled:isLoading}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isLoading||!postcode.trim(),children:isLoading?'Locating...':'Locate'})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error})]})});};export default PostcodeLocationInput;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","PostcodeLocationInput","_ref","onLocationChange","postcode","setPostcode","isLoading","setIsLoading","error","setError","handleSubmit","e","preventDefault","trim","response","fetch","concat","data","json","status","location","lat","result","latitude","lng","longitude","admin_ward","admin_district","country","err","className","children","onSubmit","type","value","onChange","target","toUpperCase","placeholder","disabled"],"sources":["/Users/xuefei/Desktop/calculator00/calculator/renewableCalculator.ui/src/components/steps/roof-condition/PostcodeLocationInput.js"],"sourcesContent":["import React, { useState } from 'react';\n\nconst PostcodeLocationInput = ({ onLocationChange }) => {\n  const [postcode, setPostcode] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!postcode.trim()) return;\n\n    setIsLoading(true);\n    setError('');\n\n    try {\n      // Use the same postcode service as in BasicInformation\n      const response = await fetch(`https://api.postcodes.io/postcodes/${postcode.trim()}`);\n      const data = await response.json();\n\n      if (data.status === 200) {\n        const location = {\n          lat: data.result.latitude,\n          lng: data.result.longitude,\n          postcode: data.result.postcode,\n          location: `${data.result.admin_ward}, ${data.result.admin_district}`,\n          country: data.result.country\n        };\n        onLocationChange(location);\n      } else {\n        setError('Invalid postcode. Please check and try again.');\n      }\n    } catch (err) {\n      setError('Unable to find location. Please check your postcode.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"postcode-location-input\">\n      <form onSubmit={handleSubmit} className=\"postcode-form\">\n        <div className=\"input-group\">\n          <input\n            type=\"text\"\n            value={postcode}\n            onChange={(e) => setPostcode(e.target.value.toUpperCase())}\n            placeholder=\"Enter postcode (e.g. SW1A 1AA)\"\n            className=\"postcode-input\"\n            disabled={isLoading}\n          />\n          <button \n            type=\"submit\" \n            className=\"btn btn-primary\"\n            disabled={isLoading || !postcode.trim()}\n          >\n            {isLoading ? 'Locating...' : 'Locate'}\n          </button>\n        </div>\n        {error && <div className=\"error-message\">{error}</div>}\n      </form>\n    </div>\n  );\n};\n\nexport default PostcodeLocationInput; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExC,KAAM,CAAAC,qBAAqB,CAAGC,IAAA,EAA0B,IAAzB,CAAEC,gBAAiB,CAAC,CAAAD,IAAA,CACjD,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGT,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACU,SAAS,CAAEC,YAAY,CAAC,CAAGX,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACY,KAAK,CAAEC,QAAQ,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAAAc,YAAY,CAAG,KAAO,CAAAC,CAAC,EAAK,CAChCA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CAACR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAAE,OAEtBN,YAAY,CAAC,IAAI,CAAC,CAClBE,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CACF;AACA,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,uCAAAC,MAAA,CAAuCZ,QAAQ,CAACS,IAAI,CAAC,CAAC,CAAE,CAAC,CACrF,KAAM,CAAAI,IAAI,CAAG,KAAM,CAAAH,QAAQ,CAACI,IAAI,CAAC,CAAC,CAElC,GAAID,IAAI,CAACE,MAAM,GAAK,GAAG,CAAE,CACvB,KAAM,CAAAC,QAAQ,CAAG,CACfC,GAAG,CAAEJ,IAAI,CAACK,MAAM,CAACC,QAAQ,CACzBC,GAAG,CAAEP,IAAI,CAACK,MAAM,CAACG,SAAS,CAC1BrB,QAAQ,CAAEa,IAAI,CAACK,MAAM,CAAClB,QAAQ,CAC9BgB,QAAQ,IAAAJ,MAAA,CAAKC,IAAI,CAACK,MAAM,CAACI,UAAU,OAAAV,MAAA,CAAKC,IAAI,CAACK,MAAM,CAACK,cAAc,CAAE,CACpEC,OAAO,CAAEX,IAAI,CAACK,MAAM,CAACM,OACvB,CAAC,CACDzB,gBAAgB,CAACiB,QAAQ,CAAC,CAC5B,CAAC,IAAM,CACLX,QAAQ,CAAC,+CAA+C,CAAC,CAC3D,CACF,CAAE,MAAOoB,GAAG,CAAE,CACZpB,QAAQ,CAAC,sDAAsD,CAAC,CAClE,CAAC,OAAS,CACRF,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACET,IAAA,QAAKgC,SAAS,CAAC,yBAAyB,CAAAC,QAAA,cACtC/B,KAAA,SAAMgC,QAAQ,CAAEtB,YAAa,CAACoB,SAAS,CAAC,eAAe,CAAAC,QAAA,eACrD/B,KAAA,QAAK8B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BjC,IAAA,UACEmC,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE9B,QAAS,CAChB+B,QAAQ,CAAGxB,CAAC,EAAKN,WAAW,CAACM,CAAC,CAACyB,MAAM,CAACF,KAAK,CAACG,WAAW,CAAC,CAAC,CAAE,CAC3DC,WAAW,CAAC,gCAAgC,CAC5CR,SAAS,CAAC,gBAAgB,CAC1BS,QAAQ,CAAEjC,SAAU,CACrB,CAAC,cACFR,IAAA,WACEmC,IAAI,CAAC,QAAQ,CACbH,SAAS,CAAC,iBAAiB,CAC3BS,QAAQ,CAAEjC,SAAS,EAAI,CAACF,QAAQ,CAACS,IAAI,CAAC,CAAE,CAAAkB,QAAA,CAEvCzB,SAAS,CAAG,aAAa,CAAG,QAAQ,CAC/B,CAAC,EACN,CAAC,CACLE,KAAK,eAAIV,IAAA,QAAKgC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEvB,KAAK,CAAM,CAAC,EAClD,CAAC,CACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAP,qBAAqB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}