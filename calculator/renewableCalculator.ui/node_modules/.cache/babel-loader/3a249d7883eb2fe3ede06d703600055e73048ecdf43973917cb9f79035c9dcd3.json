{"ast":null,"code":"var _jsxFileName = \"/Users/xuefei/Desktop/calculator00/calculator/renewableCalculator.ui/src/components/steps/address-input/LocationInput.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { locationService } from '../../../services/locationService';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LocationInput = ({\n  onLocationSelect,\n  isLoading,\n  setIsLoading\n}) => {\n  _s();\n  const [error, setError] = useState('');\n  const [isGettingLocation, setIsGettingLocation] = useState(false);\n  const handleGetLocation = async () => {\n    setIsGettingLocation(true);\n    setIsLoading(true);\n    setError('');\n    try {\n      const locationResult = await locationService.getCurrentLocation();\n      if (locationResult.success) {\n        const {\n          latitude,\n          longitude\n        } = locationResult.data;\n\n        // 尝试获取邮编\n        const postcodeResult = await locationService.coordinatesToPostcode(latitude, longitude);\n        onLocationSelect({\n          type: 'geolocation',\n          latitude,\n          longitude,\n          postcode: postcodeResult.success ? postcodeResult.data.postcode : 'Unknown',\n          location: 'Current Location',\n          accuracy: locationResult.data.accuracy\n        });\n      } else {\n        setError(locationResult.error || 'Failed to get location');\n      }\n    } catch (error) {\n      setError(error.error || 'Location access failed');\n    } finally {\n      setIsGettingLocation(false);\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"location-input-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Use Current Location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Allow location access to automatically detect your coordinates\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleGetLocation,\n      disabled: isLoading,\n      className: \"btn btn-secondary location-btn\",\n      children: isGettingLocation ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"spinner\",\n          children: \"Loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), \"Getting Location...\"]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), \"Use My Location\"]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Warning: \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"location-info\",\n      children: /*#__PURE__*/_jsxDEV(\"small\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Note:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), \" Your browser will ask for permission to access your location. This data is only used to find climate information for your area.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n};\n_s(LocationInput, \"3chcrhpFUvRa4VJNbmuL1lZLXu0=\");\n_c = LocationInput;\nexport default LocationInput;\nvar _c;\n$RefreshReg$(_c, \"LocationInput\");","map":{"version":3,"names":["React","useState","locationService","jsxDEV","_jsxDEV","Fragment","_Fragment","LocationInput","onLocationSelect","isLoading","setIsLoading","_s","error","setError","isGettingLocation","setIsGettingLocation","handleGetLocation","locationResult","getCurrentLocation","success","latitude","longitude","data","postcodeResult","coordinatesToPostcode","type","postcode","location","accuracy","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/xuefei/Desktop/calculator00/calculator/renewableCalculator.ui/src/components/steps/address-input/LocationInput.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { locationService } from '../../../services/locationService';\n\nconst LocationInput = ({ onLocationSelect, isLoading, setIsLoading }) => {\n  const [error, setError] = useState('');\n  const [isGettingLocation, setIsGettingLocation] = useState(false);\n\n  const handleGetLocation = async () => {\n    setIsGettingLocation(true);\n    setIsLoading(true);\n    setError('');\n\n    try {\n      const locationResult = await locationService.getCurrentLocation();\n      \n      if (locationResult.success) {\n        const { latitude, longitude } = locationResult.data;\n        \n        // 尝试获取邮编\n        const postcodeResult = await locationService.coordinatesToPostcode(latitude, longitude);\n        \n        onLocationSelect({\n          type: 'geolocation',\n          latitude,\n          longitude,\n          postcode: postcodeResult.success ? postcodeResult.data.postcode : 'Unknown',\n          location: 'Current Location',\n          accuracy: locationResult.data.accuracy\n        });\n      } else {\n        setError(locationResult.error || 'Failed to get location');\n      }\n    } catch (error) {\n      setError(error.error || 'Location access failed');\n    } finally {\n      setIsGettingLocation(false);\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"location-input-container\">\n      <h3>Use Current Location</h3>\n      <p>Allow location access to automatically detect your coordinates</p>\n      \n      <button\n        onClick={handleGetLocation}\n        disabled={isLoading}\n        className=\"btn btn-secondary location-btn\"\n      >\n        {isGettingLocation ? (\n          <>\n            <span className=\"spinner\">Loading</span>\n            Getting Location...\n          </>\n        ) : (\n          <>\n            <span>Location</span>\n            Use My Location\n          </>\n        )}\n      </button>\n      \n      {error && (\n        <div className=\"error-message\">\n          <span>Warning: {error}</span>\n        </div>\n      )}\n      \n      <div className=\"location-info\">\n        <small>\n          <strong>Note:</strong> Your browser will ask for permission to access your location.\n          This data is only used to find climate information for your area.\n        </small>\n      </div>\n    </div>\n  );\n};\n\nexport default LocationInput; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}