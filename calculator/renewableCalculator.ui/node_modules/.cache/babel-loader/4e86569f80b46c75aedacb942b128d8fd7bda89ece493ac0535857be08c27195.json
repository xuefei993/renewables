{"ast":null,"code":"import _objectSpread from\"/Users/xuefei/renewables/calculator/renewableCalculator.ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import ClimateChart from'./address-input/ClimateChart';import MethodSelector from'./basic-information/MethodSelector';import MethodRenderer from'./basic-information/MethodRenderer';import LocationSummary from'./basic-information/LocationSummary';import PropertyInformation from'./basic-information/PropertyInformation';import{LocationHelpModal,FieldHelpModal}from'./basic-information/HelpModals';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BasicInformation=_ref=>{let{data,onDataChange,onNext}=_ref;const[activeMethod,setActiveMethod]=useState('postcode');const[locationData,setLocationData]=useState(null);const[isLoading,setIsLoading]=useState(false);const[showHelp,setShowHelp]=useState(false);const[activeTooltip,setActiveTooltip]=useState(null);// Property information state\nconst[propertyInfo,setPropertyInfo]=useState({propertyType:'',buildingYear:'',epcRating:''});const handleLocationSelect=location=>{setLocationData(location);// Save location data to parent component\nconst updatedData=_objectSpread(_objectSpread({},propertyInfo),{},{// Include property info\nlocationMethod:location.type,postcode:location.postcode,latitude:location.latitude,longitude:location.longitude,location:location.location,country:location.country,city:location.city,region:location.region});onDataChange(updatedData);};// Handle property information changes\nconst handlePropertyInfoChange=(field,value)=>{const updatedPropertyInfo=_objectSpread(_objectSpread({},propertyInfo),{},{[field]:value});setPropertyInfo(updatedPropertyInfo);// If location data exists, update parent component data\nif(locationData){const updatedData=_objectSpread(_objectSpread({},updatedPropertyInfo),{},{locationMethod:locationData.type,postcode:locationData.postcode,latitude:locationData.latitude,longitude:locationData.longitude,location:locationData.location,country:locationData.country,city:locationData.city,region:locationData.region});onDataChange(updatedData);}};// Show/hide help tooltip\nconst toggleTooltip=field=>{setActiveTooltip(activeTooltip===field?null:field);};const handleMethodChange=method=>{setActiveMethod(method);setLocationData(null);// Clear previous data\n};const handleNext=()=>{// Check if location data and property info are complete\nif(locationData&&propertyInfo.propertyType&&propertyInfo.buildingYear&&propertyInfo.epcRating){onNext();}};// Check if all required information is complete\nconst isFormComplete=locationData&&propertyInfo.propertyType&&propertyInfo.buildingYear&&propertyInfo.epcRating;return/*#__PURE__*/_jsxs(\"div\",{className:\"step-container address-input-step\",children:[/*#__PURE__*/_jsx(MethodSelector,{activeMethod:activeMethod,onMethodChange:handleMethodChange,onShowHelp:()=>setShowHelp(true)}),/*#__PURE__*/_jsx(\"div\",{className:\"method-content\",children:/*#__PURE__*/_jsx(MethodRenderer,{activeMethod:activeMethod,onLocationSelect:handleLocationSelect,isLoading:isLoading,setIsLoading:setIsLoading})}),/*#__PURE__*/_jsx(LocationSummary,{locationData:locationData}),locationData&&/*#__PURE__*/_jsx(ClimateChart,{latitude:locationData.latitude,longitude:locationData.longitude,location:locationData.location}),/*#__PURE__*/_jsx(PropertyInformation,{locationData:locationData,propertyInfo:propertyInfo,onPropertyInfoChange:handlePropertyInfoChange,onToggleTooltip:toggleTooltip}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary \".concat(!isFormComplete?'disabled':''),onClick:handleNext,disabled:!isFormComplete||isLoading,children:\"Next: House Details\"})]}),/*#__PURE__*/_jsx(LocationHelpModal,{showHelp:showHelp,onClose:()=>setShowHelp(false)}),/*#__PURE__*/_jsx(FieldHelpModal,{activeTooltip:activeTooltip,onClose:()=>setActiveTooltip(null)})]});};export default BasicInformation;","map":{"version":3,"names":["React","useState","ClimateChart","MethodSelector","MethodRenderer","LocationSummary","PropertyInformation","LocationHelpModal","FieldHelpModal","jsx","_jsx","jsxs","_jsxs","BasicInformation","_ref","data","onDataChange","onNext","activeMethod","setActiveMethod","locationData","setLocationData","isLoading","setIsLoading","showHelp","setShowHelp","activeTooltip","setActiveTooltip","propertyInfo","setPropertyInfo","propertyType","buildingYear","epcRating","handleLocationSelect","location","updatedData","_objectSpread","locationMethod","type","postcode","latitude","longitude","country","city","region","handlePropertyInfoChange","field","value","updatedPropertyInfo","toggleTooltip","handleMethodChange","method","handleNext","isFormComplete","className","children","onMethodChange","onShowHelp","onLocationSelect","onPropertyInfoChange","onToggleTooltip","concat","onClick","disabled","onClose"],"sources":["/Users/xuefei/renewables/calculator/renewableCalculator.ui/src/components/steps/BasicInformation.js"],"sourcesContent":["import React, { useState } from 'react';\nimport ClimateChart from './address-input/ClimateChart';\nimport MethodSelector from './basic-information/MethodSelector';\nimport MethodRenderer from './basic-information/MethodRenderer';\nimport LocationSummary from './basic-information/LocationSummary';\nimport PropertyInformation from './basic-information/PropertyInformation';\nimport { LocationHelpModal, FieldHelpModal } from './basic-information/HelpModals';\n\nconst BasicInformation = ({ data, onDataChange, onNext }) => {\n  const [activeMethod, setActiveMethod] = useState('postcode');\n  const [locationData, setLocationData] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showHelp, setShowHelp] = useState(false);\n  const [activeTooltip, setActiveTooltip] = useState(null);\n  \n  // Property information state\n  const [propertyInfo, setPropertyInfo] = useState({\n    propertyType: '',\n    buildingYear: '',\n    epcRating: ''\n  });\n\n  const handleLocationSelect = (location) => {\n    setLocationData(location);\n    // Save location data to parent component\n    const updatedData = {\n      ...propertyInfo, // Include property info\n      locationMethod: location.type,\n      postcode: location.postcode,\n      latitude: location.latitude,\n      longitude: location.longitude,\n      location: location.location,\n      country: location.country,\n      city: location.city,\n      region: location.region\n    };\n    onDataChange(updatedData);\n  };\n\n  // Handle property information changes\n  const handlePropertyInfoChange = (field, value) => {\n    const updatedPropertyInfo = { ...propertyInfo, [field]: value };\n    setPropertyInfo(updatedPropertyInfo);\n    \n    // If location data exists, update parent component data\n    if (locationData) {\n      const updatedData = {\n        ...updatedPropertyInfo,\n        locationMethod: locationData.type,\n        postcode: locationData.postcode,\n        latitude: locationData.latitude,\n        longitude: locationData.longitude,\n        location: locationData.location,\n        country: locationData.country,\n        city: locationData.city,\n        region: locationData.region\n      };\n      onDataChange(updatedData);\n    }\n  };\n\n  // Show/hide help tooltip\n  const toggleTooltip = (field) => {\n    setActiveTooltip(activeTooltip === field ? null : field);\n  };\n\n  const handleMethodChange = (method) => {\n    setActiveMethod(method);\n    setLocationData(null); // Clear previous data\n  };\n\n  const handleNext = () => {\n    // Check if location data and property info are complete\n    if (locationData && propertyInfo.propertyType && propertyInfo.buildingYear && propertyInfo.epcRating) {\n      onNext();\n    }\n  };\n\n  // Check if all required information is complete\n  const isFormComplete = locationData && \n                         propertyInfo.propertyType && \n                         propertyInfo.buildingYear && \n                         propertyInfo.epcRating;\n\n  return (\n    <div className=\"step-container address-input-step\">\n      <MethodSelector\n        activeMethod={activeMethod}\n        onMethodChange={handleMethodChange}\n        onShowHelp={() => setShowHelp(true)}\n      />\n      \n      <div className=\"method-content\">\n        <MethodRenderer\n          activeMethod={activeMethod}\n          onLocationSelect={handleLocationSelect}\n          isLoading={isLoading}\n          setIsLoading={setIsLoading}\n        />\n      </div>\n\n      <LocationSummary locationData={locationData} />\n\n      {locationData && (\n        <ClimateChart\n          latitude={locationData.latitude}\n          longitude={locationData.longitude}\n          location={locationData.location}\n        />\n      )}\n\n      <PropertyInformation\n        locationData={locationData}\n        propertyInfo={propertyInfo}\n        onPropertyInfoChange={handlePropertyInfoChange}\n        onToggleTooltip={toggleTooltip}\n      />\n\n      <div className=\"button-group\">\n        <div></div>\n        <button\n          className={`btn btn-primary ${!isFormComplete ? 'disabled' : ''}`}\n          onClick={handleNext}\n          disabled={!isFormComplete || isLoading}\n        >\n          Next: House Details\n        </button>\n      </div>\n\n      <LocationHelpModal \n        showHelp={showHelp} \n        onClose={() => setShowHelp(false)} \n      />\n      \n      <FieldHelpModal \n        activeTooltip={activeTooltip} \n        onClose={() => setActiveTooltip(null)} \n      />\n    </div>\n  );\n};\n\nexport default BasicInformation; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}