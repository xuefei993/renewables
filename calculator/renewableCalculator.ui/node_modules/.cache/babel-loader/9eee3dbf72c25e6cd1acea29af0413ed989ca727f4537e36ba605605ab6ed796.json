{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Results=_ref=>{let{data,calculationResult,setCalculationResult,onBack}=_ref;const[results,setResults]=useState(null);const[selectedPlanIndex,setSelectedPlanIndex]=useState(0);useEffect(()=>{calculateResults();},[data]);const calculateResults=()=>{// Handle both old and new data formats\nlet plansToCalculate=[];if(data.upgradePlans&&Array.isArray(data.upgradePlans)){// New format with multiple plans\nplansToCalculate=data.upgradePlans.filter(plan=>plan.selectedProducts&&plan.selectedProducts.length>0);}else if(data.selectedProducts||data.productConfigurations){// Old format - convert to plan format\nplansToCalculate=[{id:1,name:\"Your Plan\",selectedProducts:data.selectedProducts||[],productConfigurations:data.productConfigurations||{}}];}if(plansToCalculate.length===0){setResults({plans:[],hasValidPlans:false});return;}// Calculate results for all plans\nconst planResults=plansToCalculate.map(plan=>{const selectedProducts=plan.selectedProducts||[];return{planId:plan.id,planName:plan.name,selectedProducts,installationCosts:calculateInstallationCosts(selectedProducts,plan.productConfigurations||{}),grantsLoans:calculateGrantsLoans(selectedProducts,calculateInstallationCosts(selectedProducts,plan.productConfigurations||{}),data),monthlyData:calculateMonthlyData(selectedProducts,plan.productConfigurations||{},data),carbonImpact:calculateCarbonImpact(selectedProducts,plan.productConfigurations||{},data)};});setResults({plans:planResults,hasValidPlans:true,isComparison:planResults.length>1});};const calculateInstallationCosts=(selectedProducts,productConfigurations)=>{let equipmentCosts=0;let labourCosts=0;const breakdown=[];selectedProducts.forEach(product=>{const config=productConfigurations[product];if(!config)return;let unitEquipmentCost=0;let unitLabourCost=0;let systemName=\"\";let capacity=0;// Map product names from old to new format\nconst productKey=product.replace('-','');if(product==='solar-panels'||productKey==='solarPanels'){if(config.selectionType==='predefined'&&config.selectedModel){var _model$price,_model$capacity;const model=config.selectedModel;unitEquipmentCost=parseFloat((_model$price=model.price)===null||_model$price===void 0?void 0:_model$price.replace(/[£,]/g,''))||8000;capacity=parseFloat((_model$capacity=model.capacity)===null||_model$capacity===void 0?void 0:_model$capacity.replace(/[kW]/g,''))||4;systemName=\"\".concat(model.brand,\" \").concat(model.model);}else if(config.selectionType==='system-recommendation'&&config.recommendedModel){var _model$price2,_model$capacity2;const model=config.recommendedModel;unitEquipmentCost=parseFloat((_model$price2=model.price)===null||_model$price2===void 0?void 0:_model$price2.replace(/[£,]/g,''))||8000;capacity=parseFloat((_model$capacity2=model.capacity)===null||_model$capacity2===void 0?void 0:_model$capacity2.replace(/[kW]/g,''))||4;systemName=\"\".concat(model.brand,\" \").concat(model.model);}else if(config.selectionType==='custom'){var _config$customPrice,_config$customCapacit;unitEquipmentCost=parseFloat((_config$customPrice=config.customPrice)===null||_config$customPrice===void 0?void 0:_config$customPrice.replace(/[£,]/g,''))||8000;capacity=parseFloat((_config$customCapacit=config.customCapacity)===null||_config$customCapacit===void 0?void 0:_config$customCapacit.replace(/[kW]/g,''))||4;systemName=\"\".concat(config.customBrand||'Custom',\" \").concat(config.customModel||'Solar Panel');}else{unitEquipmentCost=8000;capacity=4;systemName=\"Solar Panel System\";}unitLabourCost=unitEquipmentCost*0.25;// 25% of equipment cost\n}else if(product==='heat-pump'||productKey==='heatPump'){if(config.selectionType==='predefined'&&config.selectedModel){var _model$price3,_model$capacity3;const model=config.selectedModel;unitEquipmentCost=parseFloat((_model$price3=model.price)===null||_model$price3===void 0?void 0:_model$price3.replace(/[£,]/g,''))||12000;capacity=parseFloat((_model$capacity3=model.capacity)===null||_model$capacity3===void 0?void 0:_model$capacity3.replace(/[kW]/g,''))||12;systemName=\"\".concat(model.brand,\" \").concat(model.model);}else if(config.selectionType==='system-recommendation'&&config.recommendedModel){var _model$price4,_model$capacity4;const model=config.recommendedModel;unitEquipmentCost=parseFloat((_model$price4=model.price)===null||_model$price4===void 0?void 0:_model$price4.replace(/[£,]/g,''))||12000;capacity=parseFloat((_model$capacity4=model.capacity)===null||_model$capacity4===void 0?void 0:_model$capacity4.replace(/[kW]/g,''))||12;systemName=\"\".concat(model.brand,\" \").concat(model.model);}else if(config.selectionType==='custom'){var _config$customPrice2,_config$customCapacit2;unitEquipmentCost=parseFloat((_config$customPrice2=config.customPrice)===null||_config$customPrice2===void 0?void 0:_config$customPrice2.replace(/[£,]/g,''))||12000;capacity=parseFloat((_config$customCapacit2=config.customCapacity)===null||_config$customCapacit2===void 0?void 0:_config$customCapacit2.replace(/[kW]/g,''))||12;systemName=\"\".concat(config.customBrand||'Custom',\" \").concat(config.customModel||'Heat Pump');}else{unitEquipmentCost=12000;capacity=12;systemName=\"Heat Pump System\";}unitLabourCost=unitEquipmentCost*0.3;// 30% of equipment cost\n}else if(product==='battery-storage'||productKey==='batteryStorage'){if(config.selectionType==='predefined'&&config.selectedModel){var _model$price5,_model$capacity5;const model=config.selectedModel;unitEquipmentCost=parseFloat((_model$price5=model.price)===null||_model$price5===void 0?void 0:_model$price5.replace(/[£,]/g,''))||10000;capacity=parseFloat((_model$capacity5=model.capacity)===null||_model$capacity5===void 0?void 0:_model$capacity5.replace(/[kWh]/g,''))||13.5;systemName=\"\".concat(model.brand,\" \").concat(model.model);}else if(config.selectionType==='system-recommendation'&&config.recommendedModel){var _model$price6,_model$capacity6;const model=config.recommendedModel;unitEquipmentCost=parseFloat((_model$price6=model.price)===null||_model$price6===void 0?void 0:_model$price6.replace(/[£,]/g,''))||10000;capacity=parseFloat((_model$capacity6=model.capacity)===null||_model$capacity6===void 0?void 0:_model$capacity6.replace(/[kWh]/g,''))||13.5;systemName=\"\".concat(model.brand,\" \").concat(model.model);}else if(config.selectionType==='custom'){var _config$customPrice3,_config$customCapacit3;unitEquipmentCost=parseFloat((_config$customPrice3=config.customPrice)===null||_config$customPrice3===void 0?void 0:_config$customPrice3.replace(/[£,]/g,''))||10000;capacity=parseFloat((_config$customCapacit3=config.customCapacity)===null||_config$customCapacit3===void 0?void 0:_config$customCapacit3.replace(/[kWh]/g,''))||13.5;systemName=\"\".concat(config.customBrand||'Custom',\" \").concat(config.customModel||'Battery Storage');}else{unitEquipmentCost=10000;capacity=13.5;systemName=\"Battery Storage System\";}unitLabourCost=unitEquipmentCost*0.2;// 20% of equipment cost\n}const quantity=parseInt(config.quantity==='custom'?config.customQuantity:config.quantity)||1;const totalEquipment=unitEquipmentCost*quantity;const totalLabour=unitLabourCost*quantity;equipmentCosts+=totalEquipment;labourCosts+=totalLabour;breakdown.push({system:systemName,capacity:\"\".concat(capacity).concat(product==='solar-panels'||productKey==='solarPanels'?'kW':product==='battery-storage'||productKey==='batteryStorage'?'kWh':'kW'),quantity,equipmentCost:totalEquipment,labourCost:totalLabour,total:totalEquipment+totalLabour});});const vatRate=0.05;// 5% VAT for renewable energy systems\nconst subtotal=equipmentCosts+labourCosts;const vat=subtotal*vatRate;const total=subtotal+vat;return{equipmentCosts,labourCosts,subtotal,vat,total,breakdown};};const calculateGrantsLoans=(selectedProducts,installationCosts,data)=>{var _data$houseDetails;const grants=[];const loans=[];let totalGrantValue=0;// Boiler Upgrade Scheme (BUS) for heat pumps\nif(selectedProducts.includes('heatPump')){const busGrant={name:\"Boiler Upgrade Scheme (BUS)\",amount:7500,description:\"Government grant for air source heat pump installations\",eligibility:\"Owner-occupied properties, replacing fossil fuel heating\",status:\"Eligible\"};grants.push(busGrant);totalGrantValue+=busGrant.amount;}// Smart Export Guarantee (SEG) for solar\nif(selectedProducts.includes('solarPanels')){grants.push({name:\"Smart Export Guarantee (SEG)\",amount:\"Variable\",description:\"Payment for excess solar energy exported to grid\",eligibility:\"Solar installations over 50kW require certification\",status:\"Eligible\",rate:\"5.5p per kWh exported\"});}// Green Deal Finance (if applicable)\nif(installationCosts.total>5000){loans.push({name:\"Green Deal Finance\",maxAmount:Math.min(installationCosts.total,15000),rate:\"6.96% APR\",term:\"Up to 25 years\",description:\"Government-backed loan for energy efficiency improvements\",eligibility:\"Subject to Green Deal assessment\"});}// Local authority schemes (example)\nconst houseType=(_data$houseDetails=data.houseDetails)===null||_data$houseDetails===void 0?void 0:_data$houseDetails.houseType;if(houseType&&['detached','semi-detached'].includes(houseType)){loans.push({name:\"Local Authority Interest-Free Loan\",maxAmount:10000,rate:\"0% APR\",term:\"5-10 years\",description:\"Interest-free loans from participating local authorities\",eligibility:\"Subject to local authority criteria and availability\"});}const netCost=installationCosts.total-totalGrantValue;const paybackPeriod=calculatePaybackPeriod(netCost,selectedProducts,data);return{grants,loans,totalGrantValue,netCost,paybackPeriod};};const calculateMonthlyData=(selectedProducts,upgradePlan,data)=>{const months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];const monthlyGeneration=[];const monthlySavings=[];// Solar generation factors by month (UK average)\nconst solarFactors=[0.4,0.6,1.0,1.4,1.6,1.7,1.6,1.4,1.1,0.7,0.4,0.3];// Heat pump efficiency factors by month\nconst heatPumpFactors=[0.8,0.8,0.9,1.0,1.1,1.2,1.2,1.2,1.1,1.0,0.9,0.8];// Get tariff information\nconst tariffs=data.tariffs||{};const electricityRate=tariffs.electricityUnitRate||0.28;const gasRate=tariffs.gasUnitRate||0.07;const exportRate=tariffs.feedInTariffRate||0.055;months.forEach((month,index)=>{let monthlyEnergyGeneration=0;let monthlyCostSavings=0;// Solar generation\nif(selectedProducts.includes('solarPanels')){var _solarConfig$selected;const solarConfig=upgradePlan.solarPanels;const capacity=(solarConfig===null||solarConfig===void 0?void 0:(_solarConfig$selected=solarConfig.selectedModel)===null||_solarConfig$selected===void 0?void 0:_solarConfig$selected.capacity)||4;const quantity=(solarConfig===null||solarConfig===void 0?void 0:solarConfig.quantity)||1;const totalCapacity=capacity*quantity;const monthlyGeneration=totalCapacity*solarFactors[index]*30*4;// kWh per month\nmonthlyEnergyGeneration+=monthlyGeneration;// Assume 30% exported, 70% self-consumed\nconst selfConsumed=monthlyGeneration*0.7;const exported=monthlyGeneration*0.3;monthlyCostSavings+=selfConsumed*electricityRate+exported*exportRate;}// Heat pump savings\nif(selectedProducts.includes('heatPump')){const baseHeatingCost=150;// Average monthly heating cost\nconst seasonalFactor=index<3||index>9?1.5:index<5||index>7?1.2:0.7;const monthlyHeatingCost=baseHeatingCost*seasonalFactor;const heatPumpEfficiency=3.5*heatPumpFactors[index];// COP\nconst electricityCost=monthlyHeatingCost/gasRate/heatPumpEfficiency*electricityRate;const savings=monthlyHeatingCost-electricityCost;monthlyCostSavings+=Math.max(0,savings);}// Battery storage benefits (if applicable)\nif(selectedProducts.includes('batteryStorage')){// Additional savings from peak shaving\nconst peakShavingSavings=25;// Estimated monthly savings\nmonthlyCostSavings+=peakShavingSavings;}monthlyGeneration.push({month,generation:Math.round(monthlyEnergyGeneration),unit:'kWh'});monthlySavings.push({month,savings:Math.round(monthlyCostSavings),unit:'£'});});return{monthlyGeneration,monthlySavings,annualGeneration:monthlyGeneration.reduce((sum,m)=>sum+m.generation,0),annualSavings:monthlySavings.reduce((sum,m)=>sum+m.savings,0)};};const calculateCarbonImpact=(selectedProducts,upgradePlan,data)=>{let annualCO2Reduction=0;const breakdown=[];// UK grid carbon intensity: ~0.233 kg CO2 per kWh (2023)\nconst gridCarbonIntensity=0.233;// Gas carbon intensity: ~0.185 kg CO2 per kWh\nconst gasCarbonIntensity=0.185;// Solar panels - direct emission reduction\nif(selectedProducts.includes('solarPanels')){var _solarConfig$selected2;const solarConfig=upgradePlan.solarPanels;const capacity=(solarConfig===null||solarConfig===void 0?void 0:(_solarConfig$selected2=solarConfig.selectedModel)===null||_solarConfig$selected2===void 0?void 0:_solarConfig$selected2.capacity)||4;const quantity=(solarConfig===null||solarConfig===void 0?void 0:solarConfig.quantity)||1;const annualGeneration=capacity*quantity*1000;// kWh per year\nconst co2Saved=annualGeneration*gridCarbonIntensity;annualCO2Reduction+=co2Saved;breakdown.push({system:'Solar Panels',type:'Direct',reduction:Math.round(co2Saved),description:'Replaced grid electricity with clean solar energy'});}// Heat pump - replacing gas heating\nif(selectedProducts.includes('heatPump')){var _data$houseDetails2;const houseSize=((_data$houseDetails2=data.houseDetails)===null||_data$houseDetails2===void 0?void 0:_data$houseDetails2.bedrooms)||3;const annualHeatingDemand=houseSize*3000;// kWh thermal energy\n// Gas boiler emissions\nconst gasEmissions=annualHeatingDemand*gasCarbonIntensity;// Heat pump emissions (assuming COP of 3.5)\nconst heatPumpElectricity=annualHeatingDemand/3.5;const heatPumpEmissions=heatPumpElectricity*gridCarbonIntensity;const co2Saved=gasEmissions-heatPumpEmissions;annualCO2Reduction+=co2Saved;breakdown.push({system:'Heat Pump',type:'Direct',reduction:Math.round(co2Saved),description:'Replaced gas heating with efficient electric heat pump'});}// Battery storage - indirect benefits\nif(selectedProducts.includes('batteryStorage')){const indirectReduction=200;// kg CO2 per year from grid balancing\nannualCO2Reduction+=indirectReduction;breakdown.push({system:'Battery Storage',type:'Indirect',reduction:indirectReduction,description:'Grid balancing and increased renewable energy utilization'});}// Calculate equivalents\nconst treesEquivalent=Math.round(annualCO2Reduction/22);// 22kg CO2 per tree per year\nconst carMilesEquivalent=Math.round(annualCO2Reduction/0.411*1000);// 411g CO2 per mile\nreturn{annualCO2Reduction:Math.round(annualCO2Reduction),breakdown,equivalents:{trees:treesEquivalent,carMiles:carMilesEquivalent}};};const calculatePaybackPeriod=(netCost,selectedProducts,data)=>{// Simplified payback calculation\nconst monthlyData=calculateMonthlyData(selectedProducts,data.upgradePlan,data);const annualSavings=monthlyData.annualSavings;if(annualSavings<=0)return\"Unable to calculate\";const paybackYears=netCost/annualSavings;return\"\".concat(Math.round(paybackYears*10)/10,\" years\");};if(!results){return/*#__PURE__*/_jsx(\"div\",{className:\"step-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"step-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Calculating Your Results...\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please wait while we analyze your renewable energy system configuration.\"})]})});}if(!results.hasValidPlans){return/*#__PURE__*/_jsxs(\"div\",{className:\"step-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"No Plans Configured\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please go back and configure at least one upgrade plan to see your results.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:onBack,children:\"Back to Configure Plans\"})})]});}const currentPlan=results.plans[selectedPlanIndex]||results.plans[0];return/*#__PURE__*/_jsxs(\"div\",{className:\"step-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"step-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Renewable Energy System Results\"}),/*#__PURE__*/_jsx(\"p\",{children:results.isComparison?\"Compare your different renewable energy configurations to find the best solution:\":\"Based on your configuration, here's your comprehensive analysis:\"})]}),results.isComparison&&/*#__PURE__*/_jsxs(\"div\",{className:\"results-plan-selector\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Plan Comparison\"}),/*#__PURE__*/_jsx(\"div\",{className:\"plan-selector-tabs\",children:results.plans.map((plan,index)=>/*#__PURE__*/_jsxs(\"button\",{className:\"plan-selector-tab \".concat(index===selectedPlanIndex?'active':''),onClick:()=>setSelectedPlanIndex(index),children:[/*#__PURE__*/_jsx(\"span\",{className:\"plan-name\",children:plan.planName}),/*#__PURE__*/_jsxs(\"span\",{className:\"plan-products\",children:[plan.selectedProducts.length,\" product\",plan.selectedProducts.length!==1?'s':'']})]},plan.planId))}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-comparison\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Quick Comparison\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"comparison-table\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comparison-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"Metric\"}),results.plans.map((plan,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"plan-column \".concat(index===selectedPlanIndex?'active':''),children:plan.planName},plan.planId))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comparison-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"Total Cost\"}),results.plans.map((plan,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"plan-column \".concat(index===selectedPlanIndex?'active':''),children:[\"\\xA3\",plan.installationCosts.total.toLocaleString()]},plan.planId))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comparison-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"Net Cost (after grants)\"}),results.plans.map((plan,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"plan-column \".concat(index===selectedPlanIndex?'active':''),children:[\"\\xA3\",plan.grantsLoans.netCost.toLocaleString()]},plan.planId))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comparison-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"Annual Savings\"}),results.plans.map((plan,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"plan-column \".concat(index===selectedPlanIndex?'active':''),children:[\"\\xA3\",plan.monthlyData.annualSavings.toLocaleString()]},plan.planId))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comparison-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"CO\\u2082 Reduction\"}),results.plans.map((plan,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"plan-column \".concat(index===selectedPlanIndex?'active':''),children:[plan.carbonImpact.annualCO2Reduction.toLocaleString(),\" kg/year\"]},plan.planId))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comparison-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric-label\",children:\"Payback Period\"}),results.plans.map((plan,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"plan-column \".concat(index===selectedPlanIndex?'active':''),children:plan.grantsLoans.paybackPeriod},plan.planId))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"current-plan-indicator\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Detailed Analysis for: \",currentPlan.planName]}),/*#__PURE__*/_jsx(\"p\",{children:\"Click on different plan tabs above to view detailed analysis for each configuration.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Installation Costs\"}),/*#__PURE__*/_jsx(\"div\",{className:\"cost-summary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cost-overview\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cost-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Equipment Costs:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\xA3\",currentPlan.installationCosts.equipmentCosts.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cost-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Labour Costs:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\xA3\",currentPlan.installationCosts.labourCosts.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cost-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"VAT (5%):\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\xA3\",currentPlan.installationCosts.vat.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cost-item total\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Cost:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\xA3\",currentPlan.installationCosts.total.toLocaleString()]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cost-breakdown\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"System Breakdown:\"}),currentPlan.installationCosts.breakdown.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"breakdown-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"system-info\",children:[/*#__PURE__*/_jsx(\"strong\",{children:item.system}),\" (\",item.capacity,\")\",/*#__PURE__*/_jsxs(\"span\",{className:\"quantity\",children:[\"Quantity: \",item.quantity]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"costs\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Equipment: \\xA3\",item.equipmentCost.toLocaleString()]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Labour: \\xA3\",item.labourCost.toLocaleString()]}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"Total: \\xA3\",item.total.toLocaleString()]})]})]},index))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Grants & Financial Support\"}),currentPlan.grantsLoans.grants.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"grants-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Available Grants:\"}),currentPlan.grantsLoans.grants.map((grant,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"grant-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grant-header\",children:[/*#__PURE__*/_jsx(\"strong\",{children:grant.name}),/*#__PURE__*/_jsx(\"span\",{className:\"grant-amount\",children:typeof grant.amount==='number'?\"\\xA3\".concat(grant.amount.toLocaleString()):grant.amount})]}),/*#__PURE__*/_jsx(\"p\",{children:grant.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"grant-details\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"eligibility\",children:[\"Eligibility: \",grant.eligibility]}),/*#__PURE__*/_jsxs(\"span\",{className:\"status\",children:[\"Status: \",grant.status]}),grant.rate&&/*#__PURE__*/_jsxs(\"span\",{className:\"rate\",children:[\"Rate: \",grant.rate]})]})]},index))]}),currentPlan.grantsLoans.loans.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"loans-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Financing Options:\"}),currentPlan.grantsLoans.loans.map((loan,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"loan-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"loan-header\",children:[/*#__PURE__*/_jsx(\"strong\",{children:loan.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"loan-amount\",children:[\"Up to \\xA3\",loan.maxAmount.toLocaleString()]})]}),/*#__PURE__*/_jsx(\"p\",{children:loan.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"loan-terms\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Rate: \",loan.rate]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Term: \",loan.term]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"eligibility\",children:loan.eligibility})]},index))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"financial-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total Installation Cost:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\xA3\",currentPlan.installationCosts.total.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Available Grants:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"-\\xA3\",currentPlan.grantsLoans.totalGrantValue.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item net-cost\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Net Cost:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\xA3\",currentPlan.grantsLoans.netCost.toLocaleString()]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"summary-item\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Estimated Payback Period:\"}),/*#__PURE__*/_jsx(\"span\",{children:currentPlan.grantsLoans.paybackPeriod})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Monthly Performance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"monthly-charts\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chart-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Monthly Cost Savings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"monthly-data\",children:currentPlan.monthlyData.monthlySavings.map((month,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"month-bar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"month-label\",children:month.month}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"savings-bar\",style:{height:\"\".concat(month.savings/Math.max(...currentPlan.monthlyData.monthlySavings.map(m=>m.savings))*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"month-value\",children:[\"\\xA3\",month.savings]})]},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"annual-total\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Annual Savings: \\xA3\",currentPlan.monthlyData.annualSavings.toLocaleString()]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chart-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Monthly Energy Generation\"}),/*#__PURE__*/_jsx(\"div\",{className:\"monthly-data\",children:currentPlan.monthlyData.monthlyGeneration.map((month,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"month-bar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"month-label\",children:month.month}),/*#__PURE__*/_jsx(\"div\",{className:\"bar-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"generation-bar\",style:{height:\"\".concat(month.generation/Math.max(...currentPlan.monthlyData.monthlyGeneration.map(m=>m.generation))*100,\"%\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"month-value\",children:[month.generation,\" kWh\"]})]},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"annual-total\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Annual Generation: \",currentPlan.monthlyData.annualGeneration.toLocaleString(),\" kWh\"]})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Environmental Impact\"}),/*#__PURE__*/_jsx(\"div\",{className:\"carbon-summary\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"carbon-headline\",children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Annual CO\\u2082 Reduction: \",currentPlan.carbonImpact.annualCO2Reduction.toLocaleString(),\" kg\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"This is equivalent to:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"equivalents\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"equivalent-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:currentPlan.carbonImpact.equivalents.trees}),/*#__PURE__*/_jsx(\"span\",{children:\"trees planted\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"equivalent-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:currentPlan.carbonImpact.equivalents.carMiles.toLocaleString()}),/*#__PURE__*/_jsx(\"span\",{children:\"car miles avoided\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"carbon-breakdown\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Emission Reduction Breakdown:\"}),currentPlan.carbonImpact.breakdown.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"carbon-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"carbon-system\",children:[/*#__PURE__*/_jsx(\"strong\",{children:item.system}),/*#__PURE__*/_jsxs(\"span\",{className:\"carbon-type\",children:[\"(\",item.type,\")\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"carbon-reduction\",children:/*#__PURE__*/_jsxs(\"strong\",{children:[item.reduction.toLocaleString(),\" kg CO\\u2082/year\"]})}),/*#__PURE__*/_jsx(\"p\",{className:\"carbon-description\",children:item.description})]},index))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-group\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:onBack,children:\"Back to Tariffs\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",children:\"Download Full Report\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline\",children:\"Share Results\"})]})]});};export default Results;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Results","_ref","data","calculationResult","setCalculationResult","onBack","results","setResults","selectedPlanIndex","setSelectedPlanIndex","calculateResults","plansToCalculate","upgradePlans","Array","isArray","filter","plan","selectedProducts","length","productConfigurations","id","name","plans","hasValidPlans","planResults","map","planId","planName","installationCosts","calculateInstallationCosts","grantsLoans","calculateGrantsLoans","monthlyData","calculateMonthlyData","carbonImpact","calculateCarbonImpact","isComparison","equipmentCosts","labourCosts","breakdown","forEach","product","config","unitEquipmentCost","unitLabourCost","systemName","capacity","productKey","replace","selectionType","selectedModel","_model$price","_model$capacity","model","parseFloat","price","concat","brand","recommendedModel","_model$price2","_model$capacity2","_config$customPrice","_config$customCapacit","customPrice","customCapacity","customBrand","customModel","_model$price3","_model$capacity3","_model$price4","_model$capacity4","_config$customPrice2","_config$customCapacit2","_model$price5","_model$capacity5","_model$price6","_model$capacity6","_config$customPrice3","_config$customCapacit3","quantity","parseInt","customQuantity","totalEquipment","totalLabour","push","system","equipmentCost","labourCost","total","vatRate","subtotal","vat","_data$houseDetails","grants","loans","totalGrantValue","includes","busGrant","amount","description","eligibility","status","rate","maxAmount","Math","min","term","houseType","houseDetails","netCost","paybackPeriod","calculatePaybackPeriod","upgradePlan","months","monthlyGeneration","monthlySavings","solarFactors","heatPumpFactors","tariffs","electricityRate","electricityUnitRate","gasRate","gasUnitRate","exportRate","feedInTariffRate","month","index","monthlyEnergyGeneration","monthlyCostSavings","_solarConfig$selected","solarConfig","solarPanels","totalCapacity","selfConsumed","exported","baseHeatingCost","seasonalFactor","monthlyHeatingCost","heatPumpEfficiency","electricityCost","savings","max","peakShavingSavings","generation","round","unit","annualGeneration","reduce","sum","m","annualSavings","annualCO2Reduction","gridCarbonIntensity","gasCarbonIntensity","_solarConfig$selected2","co2Saved","type","reduction","_data$houseDetails2","houseSize","bedrooms","annualHeatingDemand","gasEmissions","heatPumpElectricity","heatPumpEmissions","indirectReduction","treesEquivalent","carMilesEquivalent","equivalents","trees","carMiles","paybackYears","className","children","onClick","currentPlan","toLocaleString","item","grant","loan","style","height"],"sources":["/Users/xuefei/Desktop/calculator00/calculator/renewableCalculator.ui/src/components/steps/Results.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nconst Results = ({ data, calculationResult, setCalculationResult, onBack }) => {\n  const [results, setResults] = useState(null);\n  const [selectedPlanIndex, setSelectedPlanIndex] = useState(0);\n\n  useEffect(() => {\n    calculateResults();\n  }, [data]);\n\n  const calculateResults = () => {\n    // Handle both old and new data formats\n    let plansToCalculate = [];\n    \n    if (data.upgradePlans && Array.isArray(data.upgradePlans)) {\n      // New format with multiple plans\n      plansToCalculate = data.upgradePlans.filter(plan => \n        plan.selectedProducts && plan.selectedProducts.length > 0\n      );\n    } else if (data.selectedProducts || data.productConfigurations) {\n      // Old format - convert to plan format\n      plansToCalculate = [{\n        id: 1,\n        name: \"Your Plan\",\n        selectedProducts: data.selectedProducts || [],\n        productConfigurations: data.productConfigurations || {}\n      }];\n    }\n\n    if (plansToCalculate.length === 0) {\n      setResults({ plans: [], hasValidPlans: false });\n      return;\n    }\n\n    // Calculate results for all plans\n    const planResults = plansToCalculate.map(plan => {\n      const selectedProducts = plan.selectedProducts || [];\n      \n      return {\n        planId: plan.id,\n        planName: plan.name,\n        selectedProducts,\n        installationCosts: calculateInstallationCosts(selectedProducts, plan.productConfigurations || {}),\n        grantsLoans: calculateGrantsLoans(selectedProducts, calculateInstallationCosts(selectedProducts, plan.productConfigurations || {}), data),\n        monthlyData: calculateMonthlyData(selectedProducts, plan.productConfigurations || {}, data),\n        carbonImpact: calculateCarbonImpact(selectedProducts, plan.productConfigurations || {}, data)\n      };\n    });\n\n    setResults({\n      plans: planResults,\n      hasValidPlans: true,\n      isComparison: planResults.length > 1\n    });\n  };\n\n  const calculateInstallationCosts = (selectedProducts, productConfigurations) => {\n    let equipmentCosts = 0;\n    let labourCosts = 0;\n    const breakdown = [];\n\n    selectedProducts.forEach(product => {\n      const config = productConfigurations[product];\n      if (!config) return;\n\n      let unitEquipmentCost = 0;\n      let unitLabourCost = 0;\n      let systemName = \"\";\n      let capacity = 0;\n\n      // Map product names from old to new format\n      const productKey = product.replace('-', '');\n      \n      if (product === 'solar-panels' || productKey === 'solarPanels') {\n        if (config.selectionType === 'predefined' && config.selectedModel) {\n          const model = config.selectedModel;\n          unitEquipmentCost = parseFloat(model.price?.replace(/[£,]/g, '')) || 8000;\n          capacity = parseFloat(model.capacity?.replace(/[kW]/g, '')) || 4;\n          systemName = `${model.brand} ${model.model}`;\n        } else if (config.selectionType === 'system-recommendation' && config.recommendedModel) {\n          const model = config.recommendedModel;\n          unitEquipmentCost = parseFloat(model.price?.replace(/[£,]/g, '')) || 8000;\n          capacity = parseFloat(model.capacity?.replace(/[kW]/g, '')) || 4;\n          systemName = `${model.brand} ${model.model}`;\n        } else if (config.selectionType === 'custom') {\n          unitEquipmentCost = parseFloat(config.customPrice?.replace(/[£,]/g, '')) || 8000;\n          capacity = parseFloat(config.customCapacity?.replace(/[kW]/g, '')) || 4;\n          systemName = `${config.customBrand || 'Custom'} ${config.customModel || 'Solar Panel'}`;\n        } else {\n          unitEquipmentCost = 8000;\n          capacity = 4;\n          systemName = \"Solar Panel System\";\n        }\n        unitLabourCost = unitEquipmentCost * 0.25; // 25% of equipment cost\n      } else if (product === 'heat-pump' || productKey === 'heatPump') {\n        if (config.selectionType === 'predefined' && config.selectedModel) {\n          const model = config.selectedModel;\n          unitEquipmentCost = parseFloat(model.price?.replace(/[£,]/g, '')) || 12000;\n          capacity = parseFloat(model.capacity?.replace(/[kW]/g, '')) || 12;\n          systemName = `${model.brand} ${model.model}`;\n        } else if (config.selectionType === 'system-recommendation' && config.recommendedModel) {\n          const model = config.recommendedModel;\n          unitEquipmentCost = parseFloat(model.price?.replace(/[£,]/g, '')) || 12000;\n          capacity = parseFloat(model.capacity?.replace(/[kW]/g, '')) || 12;\n          systemName = `${model.brand} ${model.model}`;\n        } else if (config.selectionType === 'custom') {\n          unitEquipmentCost = parseFloat(config.customPrice?.replace(/[£,]/g, '')) || 12000;\n          capacity = parseFloat(config.customCapacity?.replace(/[kW]/g, '')) || 12;\n          systemName = `${config.customBrand || 'Custom'} ${config.customModel || 'Heat Pump'}`;\n        } else {\n          unitEquipmentCost = 12000;\n          capacity = 12;\n          systemName = \"Heat Pump System\";\n        }\n        unitLabourCost = unitEquipmentCost * 0.3; // 30% of equipment cost\n      } else if (product === 'battery-storage' || productKey === 'batteryStorage') {\n        if (config.selectionType === 'predefined' && config.selectedModel) {\n          const model = config.selectedModel;\n          unitEquipmentCost = parseFloat(model.price?.replace(/[£,]/g, '')) || 10000;\n          capacity = parseFloat(model.capacity?.replace(/[kWh]/g, '')) || 13.5;\n          systemName = `${model.brand} ${model.model}`;\n        } else if (config.selectionType === 'system-recommendation' && config.recommendedModel) {\n          const model = config.recommendedModel;\n          unitEquipmentCost = parseFloat(model.price?.replace(/[£,]/g, '')) || 10000;\n          capacity = parseFloat(model.capacity?.replace(/[kWh]/g, '')) || 13.5;\n          systemName = `${model.brand} ${model.model}`;\n        } else if (config.selectionType === 'custom') {\n          unitEquipmentCost = parseFloat(config.customPrice?.replace(/[£,]/g, '')) || 10000;\n          capacity = parseFloat(config.customCapacity?.replace(/[kWh]/g, '')) || 13.5;\n          systemName = `${config.customBrand || 'Custom'} ${config.customModel || 'Battery Storage'}`;\n        } else {\n          unitEquipmentCost = 10000;\n          capacity = 13.5;\n          systemName = \"Battery Storage System\";\n        }\n        unitLabourCost = unitEquipmentCost * 0.2; // 20% of equipment cost\n      }\n\n      const quantity = parseInt(config.quantity === 'custom' ? config.customQuantity : config.quantity) || 1;\n      const totalEquipment = unitEquipmentCost * quantity;\n      const totalLabour = unitLabourCost * quantity;\n\n      equipmentCosts += totalEquipment;\n      labourCosts += totalLabour;\n\n      breakdown.push({\n        system: systemName,\n        capacity: `${capacity}${(product === 'solar-panels' || productKey === 'solarPanels') ? 'kW' : (product === 'battery-storage' || productKey === 'batteryStorage') ? 'kWh' : 'kW'}`,\n        quantity,\n        equipmentCost: totalEquipment,\n        labourCost: totalLabour,\n        total: totalEquipment + totalLabour\n      });\n    });\n\n    const vatRate = 0.05; // 5% VAT for renewable energy systems\n    const subtotal = equipmentCosts + labourCosts;\n    const vat = subtotal * vatRate;\n    const total = subtotal + vat;\n\n    return {\n      equipmentCosts,\n      labourCosts,\n      subtotal,\n      vat,\n      total,\n      breakdown\n    };\n  };\n\n  const calculateGrantsLoans = (selectedProducts, installationCosts, data) => {\n    const grants = [];\n    const loans = [];\n    let totalGrantValue = 0;\n\n    // Boiler Upgrade Scheme (BUS) for heat pumps\n    if (selectedProducts.includes('heatPump')) {\n      const busGrant = {\n        name: \"Boiler Upgrade Scheme (BUS)\",\n        amount: 7500,\n        description: \"Government grant for air source heat pump installations\",\n        eligibility: \"Owner-occupied properties, replacing fossil fuel heating\",\n        status: \"Eligible\"\n      };\n      grants.push(busGrant);\n      totalGrantValue += busGrant.amount;\n    }\n\n    // Smart Export Guarantee (SEG) for solar\n    if (selectedProducts.includes('solarPanels')) {\n      grants.push({\n        name: \"Smart Export Guarantee (SEG)\",\n        amount: \"Variable\",\n        description: \"Payment for excess solar energy exported to grid\",\n        eligibility: \"Solar installations over 50kW require certification\",\n        status: \"Eligible\",\n        rate: \"5.5p per kWh exported\"\n      });\n    }\n\n    // Green Deal Finance (if applicable)\n    if (installationCosts.total > 5000) {\n      loans.push({\n        name: \"Green Deal Finance\",\n        maxAmount: Math.min(installationCosts.total, 15000),\n        rate: \"6.96% APR\",\n        term: \"Up to 25 years\",\n        description: \"Government-backed loan for energy efficiency improvements\",\n        eligibility: \"Subject to Green Deal assessment\"\n      });\n    }\n\n    // Local authority schemes (example)\n    const houseType = data.houseDetails?.houseType;\n    if (houseType && ['detached', 'semi-detached'].includes(houseType)) {\n      loans.push({\n        name: \"Local Authority Interest-Free Loan\",\n        maxAmount: 10000,\n        rate: \"0% APR\",\n        term: \"5-10 years\",\n        description: \"Interest-free loans from participating local authorities\",\n        eligibility: \"Subject to local authority criteria and availability\"\n      });\n    }\n\n    const netCost = installationCosts.total - totalGrantValue;\n    const paybackPeriod = calculatePaybackPeriod(netCost, selectedProducts, data);\n\n    return {\n      grants,\n      loans,\n      totalGrantValue,\n      netCost,\n      paybackPeriod\n    };\n  };\n\n  const calculateMonthlyData = (selectedProducts, upgradePlan, data) => {\n    const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const monthlyGeneration = [];\n    const monthlySavings = [];\n\n    // Solar generation factors by month (UK average)\n    const solarFactors = [0.4, 0.6, 1.0, 1.4, 1.6, 1.7, 1.6, 1.4, 1.1, 0.7, 0.4, 0.3];\n    \n    // Heat pump efficiency factors by month\n    const heatPumpFactors = [0.8, 0.8, 0.9, 1.0, 1.1, 1.2, 1.2, 1.2, 1.1, 1.0, 0.9, 0.8];\n\n    // Get tariff information\n    const tariffs = data.tariffs || {};\n    const electricityRate = tariffs.electricityUnitRate || 0.28;\n    const gasRate = tariffs.gasUnitRate || 0.07;\n    const exportRate = tariffs.feedInTariffRate || 0.055;\n\n    months.forEach((month, index) => {\n      let monthlyEnergyGeneration = 0;\n      let monthlyCostSavings = 0;\n\n      // Solar generation\n      if (selectedProducts.includes('solarPanels')) {\n        const solarConfig = upgradePlan.solarPanels;\n        const capacity = solarConfig?.selectedModel?.capacity || 4;\n        const quantity = solarConfig?.quantity || 1;\n        const totalCapacity = capacity * quantity;\n        \n        const monthlyGeneration = totalCapacity * solarFactors[index] * 30 * 4; // kWh per month\n        monthlyEnergyGeneration += monthlyGeneration;\n        \n        // Assume 30% exported, 70% self-consumed\n        const selfConsumed = monthlyGeneration * 0.7;\n        const exported = monthlyGeneration * 0.3;\n        \n        monthlyCostSavings += (selfConsumed * electricityRate) + (exported * exportRate);\n      }\n\n      // Heat pump savings\n      if (selectedProducts.includes('heatPump')) {\n        const baseHeatingCost = 150; // Average monthly heating cost\n        const seasonalFactor = index < 3 || index > 9 ? 1.5 : index < 5 || index > 7 ? 1.2 : 0.7;\n        const monthlyHeatingCost = baseHeatingCost * seasonalFactor;\n        \n        const heatPumpEfficiency = 3.5 * heatPumpFactors[index]; // COP\n        const electricityCost = (monthlyHeatingCost / gasRate) / heatPumpEfficiency * electricityRate;\n        const savings = monthlyHeatingCost - electricityCost;\n        \n        monthlyCostSavings += Math.max(0, savings);\n      }\n\n      // Battery storage benefits (if applicable)\n      if (selectedProducts.includes('batteryStorage')) {\n        // Additional savings from peak shaving\n        const peakShavingSavings = 25; // Estimated monthly savings\n        monthlyCostSavings += peakShavingSavings;\n      }\n\n      monthlyGeneration.push({\n        month,\n        generation: Math.round(monthlyEnergyGeneration),\n        unit: 'kWh'\n      });\n\n      monthlySavings.push({\n        month,\n        savings: Math.round(monthlyCostSavings),\n        unit: '£'\n      });\n    });\n\n    return {\n      monthlyGeneration,\n      monthlySavings,\n      annualGeneration: monthlyGeneration.reduce((sum, m) => sum + m.generation, 0),\n      annualSavings: monthlySavings.reduce((sum, m) => sum + m.savings, 0)\n    };\n  };\n\n  const calculateCarbonImpact = (selectedProducts, upgradePlan, data) => {\n    let annualCO2Reduction = 0;\n    const breakdown = [];\n\n    // UK grid carbon intensity: ~0.233 kg CO2 per kWh (2023)\n    const gridCarbonIntensity = 0.233;\n    \n    // Gas carbon intensity: ~0.185 kg CO2 per kWh\n    const gasCarbonIntensity = 0.185;\n\n    // Solar panels - direct emission reduction\n    if (selectedProducts.includes('solarPanels')) {\n      const solarConfig = upgradePlan.solarPanels;\n      const capacity = solarConfig?.selectedModel?.capacity || 4;\n      const quantity = solarConfig?.quantity || 1;\n      const annualGeneration = capacity * quantity * 1000; // kWh per year\n      \n      const co2Saved = annualGeneration * gridCarbonIntensity;\n      annualCO2Reduction += co2Saved;\n      \n      breakdown.push({\n        system: 'Solar Panels',\n        type: 'Direct',\n        reduction: Math.round(co2Saved),\n        description: 'Replaced grid electricity with clean solar energy'\n      });\n    }\n\n    // Heat pump - replacing gas heating\n    if (selectedProducts.includes('heatPump')) {\n      const houseSize = data.houseDetails?.bedrooms || 3;\n      const annualHeatingDemand = houseSize * 3000; // kWh thermal energy\n      \n      // Gas boiler emissions\n      const gasEmissions = annualHeatingDemand * gasCarbonIntensity;\n      \n      // Heat pump emissions (assuming COP of 3.5)\n      const heatPumpElectricity = annualHeatingDemand / 3.5;\n      const heatPumpEmissions = heatPumpElectricity * gridCarbonIntensity;\n      \n      const co2Saved = gasEmissions - heatPumpEmissions;\n      annualCO2Reduction += co2Saved;\n      \n      breakdown.push({\n        system: 'Heat Pump',\n        type: 'Direct',\n        reduction: Math.round(co2Saved),\n        description: 'Replaced gas heating with efficient electric heat pump'\n      });\n    }\n\n    // Battery storage - indirect benefits\n    if (selectedProducts.includes('batteryStorage')) {\n      const indirectReduction = 200; // kg CO2 per year from grid balancing\n      annualCO2Reduction += indirectReduction;\n      \n      breakdown.push({\n        system: 'Battery Storage',\n        type: 'Indirect',\n        reduction: indirectReduction,\n        description: 'Grid balancing and increased renewable energy utilization'\n      });\n    }\n\n    // Calculate equivalents\n    const treesEquivalent = Math.round(annualCO2Reduction / 22); // 22kg CO2 per tree per year\n    const carMilesEquivalent = Math.round(annualCO2Reduction / 0.411 * 1000); // 411g CO2 per mile\n\n    return {\n      annualCO2Reduction: Math.round(annualCO2Reduction),\n      breakdown,\n      equivalents: {\n        trees: treesEquivalent,\n        carMiles: carMilesEquivalent\n      }\n    };\n  };\n\n  const calculatePaybackPeriod = (netCost, selectedProducts, data) => {\n    // Simplified payback calculation\n    const monthlyData = calculateMonthlyData(selectedProducts, data.upgradePlan, data);\n    const annualSavings = monthlyData.annualSavings;\n    \n    if (annualSavings <= 0) return \"Unable to calculate\";\n    \n    const paybackYears = netCost / annualSavings;\n    return `${Math.round(paybackYears * 10) / 10} years`;\n  };\n\n  if (!results) {\n    return (\n      <div className=\"step-container\">\n        <div className=\"step-header\">\n          <h2>Calculating Your Results...</h2>\n          <p>Please wait while we analyze your renewable energy system configuration.</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!results.hasValidPlans) {\n    return (\n      <div className=\"step-container\">\n        <div className=\"step-header\">\n          <h2>No Plans Configured</h2>\n          <p>Please go back and configure at least one upgrade plan to see your results.</p>\n        </div>\n        <div className=\"button-group\">\n          <button type=\"button\" className=\"btn btn-secondary\" onClick={onBack}>\n            Back to Configure Plans\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const currentPlan = results.plans[selectedPlanIndex] || results.plans[0];\n\n  return (\n    <div className=\"step-container\">\n      <div className=\"step-header\">\n        <h2>Your Renewable Energy System Results</h2>\n        <p>\n          {results.isComparison \n            ? \"Compare your different renewable energy configurations to find the best solution:\" \n            : \"Based on your configuration, here's your comprehensive analysis:\"\n          }\n        </p>\n      </div>\n\n      {/* Plan Selector for Comparison */}\n      {results.isComparison && (\n        <div className=\"results-plan-selector\">\n          <h3>Plan Comparison</h3>\n          <div className=\"plan-selector-tabs\">\n            {results.plans.map((plan, index) => (\n              <button\n                key={plan.planId}\n                className={`plan-selector-tab ${index === selectedPlanIndex ? 'active' : ''}`}\n                onClick={() => setSelectedPlanIndex(index)}\n              >\n                <span className=\"plan-name\">{plan.planName}</span>\n                <span className=\"plan-products\">{plan.selectedProducts.length} product{plan.selectedProducts.length !== 1 ? 's' : ''}</span>\n              </button>\n            ))}\n          </div>\n          \n          {/* Quick Comparison Table */}\n          <div className=\"quick-comparison\">\n            <h4>Quick Comparison</h4>\n            <div className=\"comparison-table\">\n              <div className=\"comparison-header\">\n                <div className=\"metric-label\">Metric</div>\n                {results.plans.map((plan, index) => (\n                  <div key={plan.planId} className={`plan-column ${index === selectedPlanIndex ? 'active' : ''}`}>\n                    {plan.planName}\n                  </div>\n                ))}\n              </div>\n              \n              <div className=\"comparison-row\">\n                <div className=\"metric-label\">Total Cost</div>\n                {results.plans.map((plan, index) => (\n                  <div key={plan.planId} className={`plan-column ${index === selectedPlanIndex ? 'active' : ''}`}>\n                    £{plan.installationCosts.total.toLocaleString()}\n                  </div>\n                ))}\n              </div>\n              \n              <div className=\"comparison-row\">\n                <div className=\"metric-label\">Net Cost (after grants)</div>\n                {results.plans.map((plan, index) => (\n                  <div key={plan.planId} className={`plan-column ${index === selectedPlanIndex ? 'active' : ''}`}>\n                    £{plan.grantsLoans.netCost.toLocaleString()}\n                  </div>\n                ))}\n              </div>\n              \n              <div className=\"comparison-row\">\n                <div className=\"metric-label\">Annual Savings</div>\n                {results.plans.map((plan, index) => (\n                  <div key={plan.planId} className={`plan-column ${index === selectedPlanIndex ? 'active' : ''}`}>\n                    £{plan.monthlyData.annualSavings.toLocaleString()}\n                  </div>\n                ))}\n              </div>\n              \n              <div className=\"comparison-row\">\n                <div className=\"metric-label\">CO₂ Reduction</div>\n                {results.plans.map((plan, index) => (\n                  <div key={plan.planId} className={`plan-column ${index === selectedPlanIndex ? 'active' : ''}`}>\n                    {plan.carbonImpact.annualCO2Reduction.toLocaleString()} kg/year\n                  </div>\n                ))}\n              </div>\n              \n              <div className=\"comparison-row\">\n                <div className=\"metric-label\">Payback Period</div>\n                {results.plans.map((plan, index) => (\n                  <div key={plan.planId} className={`plan-column ${index === selectedPlanIndex ? 'active' : ''}`}>\n                    {plan.grantsLoans.paybackPeriod}\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"current-plan-indicator\">\n            <h4>Detailed Analysis for: {currentPlan.planName}</h4>\n            <p>Click on different plan tabs above to view detailed analysis for each configuration.</p>\n          </div>\n        </div>\n      )}\n\n      {/* Installation Costs Section */}\n      <div className=\"results-section\">\n        <h3>Installation Costs</h3>\n        <div className=\"cost-summary\">\n          <div className=\"cost-overview\">\n            <div className=\"cost-item\">\n              <span>Equipment Costs:</span>\n              <span>£{currentPlan.installationCosts.equipmentCosts.toLocaleString()}</span>\n            </div>\n            <div className=\"cost-item\">\n              <span>Labour Costs:</span>\n              <span>£{currentPlan.installationCosts.labourCosts.toLocaleString()}</span>\n            </div>\n            <div className=\"cost-item\">\n              <span>VAT (5%):</span>\n              <span>£{currentPlan.installationCosts.vat.toLocaleString()}</span>\n            </div>\n            <div className=\"cost-item total\">\n              <span>Total Cost:</span>\n              <span>£{currentPlan.installationCosts.total.toLocaleString()}</span>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"cost-breakdown\">\n          <h4>System Breakdown:</h4>\n          {currentPlan.installationCosts.breakdown.map((item, index) => (\n            <div key={index} className=\"breakdown-item\">\n              <div className=\"system-info\">\n                <strong>{item.system}</strong> ({item.capacity})\n                <span className=\"quantity\">Quantity: {item.quantity}</span>\n              </div>\n              <div className=\"costs\">\n                <span>Equipment: £{item.equipmentCost.toLocaleString()}</span>\n                <span>Labour: £{item.labourCost.toLocaleString()}</span>\n                <strong>Total: £{item.total.toLocaleString()}</strong>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Grants and Loans Section */}\n      <div className=\"results-section\">\n        <h3>Grants & Financial Support</h3>\n        \n        {currentPlan.grantsLoans.grants.length > 0 && (\n          <div className=\"grants-section\">\n            <h4>Available Grants:</h4>\n            {currentPlan.grantsLoans.grants.map((grant, index) => (\n              <div key={index} className=\"grant-item\">\n                <div className=\"grant-header\">\n                  <strong>{grant.name}</strong>\n                  <span className=\"grant-amount\">\n                    {typeof grant.amount === 'number' ? `£${grant.amount.toLocaleString()}` : grant.amount}\n                  </span>\n                </div>\n                <p>{grant.description}</p>\n                <div className=\"grant-details\">\n                  <span className=\"eligibility\">Eligibility: {grant.eligibility}</span>\n                  <span className=\"status\">Status: {grant.status}</span>\n                  {grant.rate && <span className=\"rate\">Rate: {grant.rate}</span>}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {currentPlan.grantsLoans.loans.length > 0 && (\n          <div className=\"loans-section\">\n            <h4>Financing Options:</h4>\n            {currentPlan.grantsLoans.loans.map((loan, index) => (\n              <div key={index} className=\"loan-item\">\n                <div className=\"loan-header\">\n                  <strong>{loan.name}</strong>\n                  <span className=\"loan-amount\">Up to £{loan.maxAmount.toLocaleString()}</span>\n                </div>\n                <p>{loan.description}</p>\n                <div className=\"loan-terms\">\n                  <span>Rate: {loan.rate}</span>\n                  <span>Term: {loan.term}</span>\n                </div>\n                <p className=\"eligibility\">{loan.eligibility}</p>\n              </div>\n            ))}\n          </div>\n        )}\n\n        <div className=\"financial-summary\">\n          <div className=\"summary-item\">\n            <span>Total Installation Cost:</span>\n            <span>£{currentPlan.installationCosts.total.toLocaleString()}</span>\n          </div>\n          <div className=\"summary-item\">\n            <span>Available Grants:</span>\n            <span>-£{currentPlan.grantsLoans.totalGrantValue.toLocaleString()}</span>\n          </div>\n          <div className=\"summary-item net-cost\">\n            <span>Net Cost:</span>\n            <span>£{currentPlan.grantsLoans.netCost.toLocaleString()}</span>\n          </div>\n          <div className=\"summary-item\">\n            <span>Estimated Payback Period:</span>\n            <span>{currentPlan.grantsLoans.paybackPeriod}</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Monthly Savings and Generation */}\n      <div className=\"results-section\">\n        <h3>Monthly Performance</h3>\n        \n        <div className=\"monthly-charts\">\n          <div className=\"chart-section\">\n            <h4>Monthly Cost Savings</h4>\n            <div className=\"monthly-data\">\n              {currentPlan.monthlyData.monthlySavings.map((month, index) => (\n                <div key={index} className=\"month-bar\">\n                  <div className=\"month-label\">{month.month}</div>\n                  <div className=\"bar-container\">\n                    <div \n                      className=\"savings-bar\" \n                      style={{height: `${(month.savings / Math.max(...currentPlan.monthlyData.monthlySavings.map(m => m.savings))) * 100}%`}}\n                    ></div>\n                  </div>\n                  <div className=\"month-value\">£{month.savings}</div>\n                </div>\n              ))}\n            </div>\n            <div className=\"annual-total\">\n              <strong>Annual Savings: £{currentPlan.monthlyData.annualSavings.toLocaleString()}</strong>\n            </div>\n          </div>\n\n          <div className=\"chart-section\">\n            <h4>Monthly Energy Generation</h4>\n            <div className=\"monthly-data\">\n              {currentPlan.monthlyData.monthlyGeneration.map((month, index) => (\n                <div key={index} className=\"month-bar\">\n                  <div className=\"month-label\">{month.month}</div>\n                  <div className=\"bar-container\">\n                    <div \n                      className=\"generation-bar\" \n                      style={{height: `${(month.generation / Math.max(...currentPlan.monthlyData.monthlyGeneration.map(m => m.generation))) * 100}%`}}\n                    ></div>\n                  </div>\n                  <div className=\"month-value\">{month.generation} kWh</div>\n                </div>\n              ))}\n            </div>\n            <div className=\"annual-total\">\n              <strong>Annual Generation: {currentPlan.monthlyData.annualGeneration.toLocaleString()} kWh</strong>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Carbon Impact Section */}\n      <div className=\"results-section\">\n        <h3>Environmental Impact</h3>\n        \n        <div className=\"carbon-summary\">\n          <div className=\"carbon-headline\">\n            <h4>Annual CO₂ Reduction: {currentPlan.carbonImpact.annualCO2Reduction.toLocaleString()} kg</h4>\n            <p>This is equivalent to:</p>\n            <div className=\"equivalents\">\n              <div className=\"equivalent-item\">\n                <strong>{currentPlan.carbonImpact.equivalents.trees}</strong>\n                <span>trees planted</span>\n              </div>\n              <div className=\"equivalent-item\">\n                <strong>{currentPlan.carbonImpact.equivalents.carMiles.toLocaleString()}</strong>\n                <span>car miles avoided</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"carbon-breakdown\">\n          <h4>Emission Reduction Breakdown:</h4>\n          {currentPlan.carbonImpact.breakdown.map((item, index) => (\n            <div key={index} className=\"carbon-item\">\n              <div className=\"carbon-system\">\n                <strong>{item.system}</strong>\n                <span className=\"carbon-type\">({item.type})</span>\n              </div>\n              <div className=\"carbon-reduction\">\n                <strong>{item.reduction.toLocaleString()} kg CO₂/year</strong>\n              </div>\n              <p className=\"carbon-description\">{item.description}</p>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <div className=\"button-group\">\n        <button type=\"button\" className=\"btn btn-secondary\" onClick={onBack}>\n          Back to Tariffs\n        </button>\n        <button type=\"button\" className=\"btn btn-primary\">\n          Download Full Report\n        </button>\n        <button type=\"button\" className=\"btn btn-outline\">\n          Share Results\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Results; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}